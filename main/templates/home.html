{% extends "base.html" %}
{% load typogrify_tags %}
{% load jtimesince %}
{%  block head %}
    <link href="{{ STATIC_URL }}css/lgod-rs.css" rel="stylesheet">
    <script src="{{ STATIC_URL }}js/jquery.royalslider.custom.min.js"></script>

{% endblock %}
{% block featured %}
    <div class="row-fluid homeOffset">
        <div onclick="location.href='/article/{{ features.0.title_slug }}';" class="mobileHomeFeatured">
            <div onclick="location.href='/article/{{ features.0.title_slug }}';" class="featuredArticles">
                <div onclick="location.href='/article/{{ features.0.title_slug }}';" class="featuredListImg">
                    <a href="/article/{{ features.0.title_slug }}"><img src="{{ features.0.image.small_featured.CDN_URL }}"></a>
                </div>
                <div class="featuredListDescTransbox"></div>
                <div class="featuredListDesc">
                    <span class="featuredListTitle"><b>{{ features.0.title|safe|typogrify }}</b></span>
                    <p>{{ features.0.summary|safe|typogrify }}</p>
                </div>
            </div>
        </div>
        <div id="lgodSlider" class="royalSlider rsDefault">
            <div onclick="location.href='/article/{{ features.0.title_slug }}';" class="featuredArticles">
                <div onclick="location.href='/article/{{ features.0.title_slug }}';" class="featuredListImg">
                    <a
                            href="/article/{{ features.0.title_slug }}"
                            data-r0='<img class="rsimg" src="{{ features.0.image.small_featured.CDN_URL }}">'
                            data-r641='<img src="{{ features.0.image.medium_featured.CDN_URL }}">'
                            data-r801='<img src="{{ features.0.image.header.CDN_URL }}">'
                            ></a>
                </div>
                <div class="featuredListDescTransbox"></div>
                <div class="featuredListDesc">
                    <span class="featuredListTitle"><b>{{ features.0.title|safe|typogrify }}</b></span>
                    <p>{{ features.0.summary|safe|typogrify }}</p>
                </div>
            </div>
            <div onclick="location.href='/article/{{ features.1.title_slug }}';" class="featuredArticles">
                <div onclick="location.href='/article/{{ features.1.title_slug }}';" class="featuredListImg">
                    <a
                            href="/article/{{ features.1.title_slug }}"
                            data-r0='<img class="rsimg" src="{{ features.1.image.small_featured.CDN_URL }}">'
                            data-r641='<img src="{{ features.1.image.medium_featured.CDN_URL }}">'
                            data-r801='<img src="{{ features.1.image.header.CDN_URL }}">'
                            ></a>
                </div>
                <div class="featuredListDescTransbox"></div>
                <div class="featuredListDesc">
                    <span class="featuredListTitle"><b>{{ features.1.title|safe|typogrify }}</b></span>
                    <p>{{ features.1.summary|safe|typogrify }}</p>
                </div>
            </div>
            <div onclick="location.href='/article/{{ features.2.title_slug }}';" class="featuredArticles">
                <div onclick="location.href='/article/{{ features.2.title_slug }}';" class="featuredListImg">
                    <a
                            href="/article/{{ features.2.title_slug }}"
                            data-r0='<img class="rsimg" src="{{ features.2.image.small_featured.CDN_URL }}">'
                            data-r641='<img src="{{ features.2.image.medium_featured.CDN_URL }}">'
                            data-r801='<img src="{{ features.2.image.header.CDN_URL }}">'
                            ></a>
                </div>
                <div class="featuredListDescTransbox"></div>
                <div class="featuredListDesc">
                    <span class="featuredListTitle"><b>{{ features.2.title|safe|typogrify }}</b></span>
                    <p>{{ features.2.summary|safe|typogrify }}</p>
                </div>
            </div>
        </div>
    </div>
    <div id="notesbar">
        <div class="notesbarList royalSlider contentSlider rsUni">
            <div id="notespage1">
                {% for article in notespage1 %}
                    <div id="{{ article.list_date|date:"YmdHis"  }}" class="notesbarItem">
                        <h1>{{ article.title|safe|typogrify }}</h1>
                        {{ article.body|safe|typogrify }}
                        <div class="notesbarTime">Posted {{ article.list_date|age }} ago</div>
                    </div>
                    {% if forloop.counter == 2 %}
                    </div>
                    <div>
                    {% endif %}
                {% endfor %}
            </div>
            <div id="notespage2">
                {% for article in notespage2 %}
                    <div id="{{ article.list_date|date:"YmdHis" }}" class="notesbarItem">
                        <h1>{{ article.title|safe|typogrify }}</h1>
                        {{ article.body|safe|typogrify }}
                        <div class="notesbarTime">Posted {{ article.list_date|age }} ago</div>
                    </div>
                    {% if forloop.counter == 2 %}
                        </div>
                        <div>
                    {% endif %}
                {% endfor %}
            </div>
            <div id="notespage3">
                {% for article in notespage3 %}
                    <div id="{{ article.list_date|date:"YmdHis"  }}" class="notesbarItem">
                        <h1>{{ article.title|safe|typogrify }}</h1>
                        {{ article.body|safe|typogrify }}
                        <div class="notesbarTime">Posted {{ article.list_date|age }} ago</div>
                    </div>
                    {% if forloop.counter == 2 %}
                        </div>
                        <div>
                    {% endif %}
                {% endfor %}
            </div>
        </div>
    </div>
{% endblock %}
{% block content %}
    <div class="row-fluid homePad">
        {% for article in row1 %}
            {% if article.type == 'standard' %}
                <div class="span6 articleListBorder">
                    {% if article.image %}
                    <div class="articleListImage">
                        <a
                        href="/article/{{ article.title_slug }}"
                        data-r0='<img class="lazy" data-original="{{ article.image.small_header.CDN_URL }}" src="/static/img/grey.png">'
                        data-r801='<img class="lazy" data-original="{{ article.image.medium_header.CDN_URL }}" src="/static/img/grey.png">'
                        data-r978='<img class="lazy" data-original="{{ article.image.small_header.CDN_URL }}" src="/static/img/grey.png">'
                        ></a>
                    </div>
                    {% endif %}
                    <div class="articleListBody">
                        <span class="articleListTitle"><a href="/article/{{ article.title_slug }}">{{ article.title|safe|typogrify }}</a></span>
                        <div class="articleListDate">
                            Posted on {{ article.date_posted|date:" M jS Y" }} {{ article.date_posted|date:"P" }} by {% if article.author.staffprofile %}{{ article.author.staffprofile.displayName }}{% else %}{{ article.author.username|capfirst }}{% endif %}
                            {% if article.date_posted != article.list_date %}
                            <div class="articleUpdateDate">
                                Updated on {{ article.list_date|date:"M jS Y"}} {{ article.list_date|date:"P" }}
                            </div>
                            {% endif %}
                        </div>
                        <p>
                            {{ article.summary|safe|typogrify }}
                        </p>
                    </div>
                    <div class="articleListMetaData fright">
                        <a href="/article/{{ article.title_slug }}">Read More..</a> |
                        <i class="icon-comment"></i> <a data-disqus-identifier="{{ article.id }}" href="/article/{{ article.title_slug }}/#disqus_thread">Count</a><p>
                        <div class="articleListTags margintop1" >Tagged:
                            {% if article.type == 'featured' %}<span class="label label-important">Featured</span>{% endif %}
                            {% for category in article.categories.all %}
                                <a href="/category/{{ category.slug }}" class="label label-info">{{ category.name }}</a>
                            {% endfor %}
                        </div>
                    </div>
                </div>
            {% endif %}
            {% if article.type == 'sidebar' %}
                <div class="span6 sidebarArticleListBorder">
                    <div class="sidebarArticleListBody">
                        <span class="sidebarArticleListTitle">{{ article.title|safe|typogrify }}</span>
                        <div class="articleListDate">
                            Posted on {{ article.date_posted|date:" M jS Y" }} at {{ article.date_posted|date:"P" }} by {% if article.author.staffprofile %}{{ article.author.staffprofile.displayName }}{% else %}{{ article.author.username|capfirst }}{% endif %}
                            {% if article.date_posted != article.list_date %}
                                <div class="articleUpdateDate">
                                    Updated on {{ article.list_date|date:"M jS Y"}} at {{ article.list_date|date:"P" }}
                                </div>
                            {% endif %}
                        </div>
                        <p>
                            {{ article.body|safe }}
                        </p>
                    </div>
                    <div class="articleListMetaData fright">
                        <div class="articleListTags margintop1" >
                            <span class="label label-info">Side Notes</span>
                        </div>
                    </div>
                </div>
            {% endif %}
            {% if forloop.counter|divisibleby:2 and not forloop.last%}
                </div>
                <div class="row-fluid homePad">
            {% endif %}
        {% endfor %}
        </div>
    <div class="row-fluid homePad">
        <div class="span12">
            <div class="promotedArticles">
                <div onclick="location.href='/article/{{ features.1.title_slug }}';" class="promotedListImg">
                    <a
                            href="/article/{{ features.1.title_slug }}"
                            data-r0='<img src="{{ features.1.image.small_featured.CDN_URL }}">'
                            data-r481='<img src="{{ features.1.image.medium_featured.CDN_URL }}">'
                            data-r641='<img src="{{ features.1.image.header.CDN_URL }}">'
                            ></a>
                </div>
                <div onclick="location.href='/article/{{ features.1.title_slug }}';" class="promotedListDesc">
                    <span class="promotedListTitle"><b>{{ features.1.title|safe|typogrify }}</b></span>
                    <p>{{ features.1.summary|safe|typogrify }}</p>
                    <div onclick="location.href='/article/{{ features.1.title_slug }}';" class="promotedListDescTransbox"></div>
                </div>
            </div>
        </div>
    </div>
    <div class="row-fluid homePad">
        {% for article in row2 %}
            {% if article.type = 'standard' %}
                <div class="span6 articleListBorder">
                    {% if article.image %}
                    <div class="articleListImage">
                        <a
                                href="/article/{{ article.title_slug }}"
                                data-r0='<img class="lazy" data-original="{{ article.image.small_header.CDN_URL }}" src="/static/img/grey.png">'
                                data-r801='<img class="lazy" data-original="{{ article.image.medium_header.CDN_URL }}" src="/static/img/grey.png">'
                                data-r978='<img class="lazy" data-original="{{ article.image.small_header.CDN_URL }}" src="/static/img/grey.png">'
                                ></a>
                    </div>
                    {% endif %}
                    <div class="articleListBody">
                        <span class="articleListTitle"><a href="/article/{{ article.title_slug }}">{{ article.title|safe|typogrify }}</a></span>
                        <div class="articleListDate">
                            Posted on {{ article.date_posted|date:" M jS Y" }} at {{ article.date_posted|date:"P" }} by {% if article.author.staffprofile %}{{ article.author.staffprofile.displayName }}{% else %}{{ article.author.username|capfirst }}{% endif %}
                            {% if article.date_posted != article.list_date %}
                                <div class="articleUpdateDate">
                                    Updated on {{ article.list_date|date:"M jS Y"}} at {{ article.list_date|date:"P" }}
                                </div>
                            {% endif %}
                        </div>
                        <p>
                            {{ article.summary|safe|typogrify }}
                        </p>
                    </div>
                    <div class="articleListMetaData fright">
                        <a href="/article/{{ article.title_slug }}">Read More..</a> |
                        <i class="icon-comment"></i> <a data-disqus-identifier="{{ article.id }}" href="/article/{{ article.title_slug }}/#disqus_thread">Count</a><p>
                        <div class="articleListTags margintop1" >Tagged:
                            {% if article.type == 'featured' %}<span class="label label-important">Featured</span>{% endif %}
                            {% for category in article.categories.all %}
                                <a href="/category/{{ category.slug }}" class="label label-info">{{ category.name }}</a>
                            {% endfor %}
                        </div>
                    </div>
                </div>
            {% endif %}
            {% if forloop.counter|divisibleby:2 and not forloop.last%}
                </div>
                <div class="row-fluid homePad">
            {% endif %}
        {% endfor %}
        </div>
    <div class="row-fluid homePad">
        <div class="span12">
            <div class="promotedArticles">
                <div onclick="location.href='/article/{{ features.2.title_slug|typogrify }}';" class="promotedListImg">
                    <a
                            href="/article/{{ features.2.title_slug }}"
                            data-r0='<img src="{{ features.2.image.small_featured.CDN_URL }}">'
                            data-r481='<img src="{{ features.2.image.medium_featured.CDN_URL }}">'
                            data-r641='<img src="{{ features.2.image.header.CDN_URL }}">'
                            ></a>
                </div>
                <div onclick="location.href='/article/{{ features.2.title_slug }}';" class="promotedListDesc">
                    <span class="promotedListTitle"><b>{{ features.2.title|safe|typogrify }}</b></span>
                    <p>{{ features.2.summary|safe|typogrify }}</p>
                    <div onclick="location.href='/article/{{ features.2.title_slug }}';" class="promotedListDescTransbox"></div>
                </div>
            </div>
        </div>
    </div>
    <div class="row-fluid homePad">
        {% for article in row3 %}
            {% if article.type = 'standard' %}
                <div class="span6 articleListBorder">
                    {% if article.image %}
                    <div class="articleListImage">
                        <a
                                href="/article/{{ article.title_slug }}"
                                data-r0='<img class="lazy" data-original="{{ article.image.small_header.CDN_URL }}" src="/static/img/grey.png">'
                                data-r801='<img class="lazy" data-original="{{ article.image.medium_header.CDN_URL }}" src="/static/img/grey.png">'
                                data-r978='<img class="lazy" data-original="{{ article.image.small_header.CDN_URL }}" src="/static/img/grey.png">'
                                ></a>
                    </div>
                    {% endif %}
                    <div class="articleListBody">
                        <span class="articleListTitle"><a href="/article/{{ article.title_slug }}">{{ article.title|safe|typogrify }}</a></span>
                        <div class="articleListDate">
                            Posted on {{ article.date_posted|date:" M jS Y" }} at {{ article.date_posted|date:"P" }} by  {% if article.author.staffprofile %}{{ article.author.staffprofile.displayName }}{% else %}{{ article.author.username|capfirst }}{% endif %}
                            {% if article.date_posted != article.list_date %}
                                <div class="articleUpdateDate">
                                    Updated on {{ article.list_date|date:"M jS Y"}} at {{ article.list_date|date:"P" }}
                                </div>
                            {% endif %}
                        </div>
                        <p>
                            {{ article.summary|safe|typogrify }}
                        </p>
                    </div>
                    <div class="articleListMetaData fright">
                        <a href="/article/{{ article.title_slug }}">Read More..</a> |
                        <i class="icon-comment"></i> <a data-disqus-identifier="{{ article.id }}" href="/article/{{ article.title_slug }}/#disqus_thread">Count</a><p>
                        <div class="articleListTags margintop1" >Tagged:
                            {% if article.type == 'featured' %}<span class="label label-important">Featured</span>{% endif %}
                            {% for category in article.categories.all %}
                                <a href="/category/{{ category.slug }}" class="label label-info">{{ category.name }}</a>
                            {% endfor %}
                        </div>
                    </div>
                </div>
            {% endif %}
            {% if forloop.counter|divisibleby:2 and not forloop.last%}
                </div>
                <div class="row-fluid homePad">
            {% endif %}
        {% endfor %}
    </div>
{% endblock %}
{% block footer %}
<div class="paginationWrap">
    <div class="paginationWrap">
        <ul class="pager">
            <li><a href="/archive?page=2">Past Articles</a></li>
        </ul>
    </div>

</div>
{% endblock %}

{% block javascript %}
    <script type="text/javascript">

        $(document).ready(function($) {
            function homeTriggers (){
                $("img.lazy").lazyload({ threshold : 200 });
                insertSlides();
            }
            Response.action(homeTriggers);

            function compareName(a, b)
            {

                if (a.id < b.id) return 1;
                if (a.id > b.id) return -1;
                return 0;
            }

            function insertSlides() {
                var slider = $('.notesbarList').data('royalSlider');
                if (Response.band(0,767)) {
                    if (slider.slides.length < 6) {
                        var slides = $('.notesbarList .notesbarItem');
                        slides.sort(compareName);
                        slider.appendSlide(slides.slice(2,4),1);
                        slider.appendSlide(slides.slice(6,8),3);
                        slider.appendSlide(slides.slice(10,12),5);
                        slider.updateSliderSize();
                    }
                }
                else if (Response.band(768)) {
                    if (slider.slides.length > 3) {
                        var slides = $('.notesbarList .notesbarItem');
                        slides.sort(compareName);
                        $('#notespage1').append(slides.slice(2,4));
                        slider.removeSlide(1);
                        $('#notespage2').append(slides.slice(6,8));
                        slider.removeSlide(2);
                        $('#notespage3').append(slides.slice(10,12));
                        slider.removeSlide(3);
                        slider.updateSliderSize();
                    }
                }
                slider.updateSliderSize();
            }

            $("#lgodSlider").royalSlider({
                transitionType: 'fade',
                loop: true,
                navigateByClick: false,
                list: 'test',
                autoPlay: {
                    enabled: true,
                    pauseOnHover: true,
                    stopAtAction: false,
                    delay: 6000
                }
            });

            $(".notesbarList").royalSlider({
                arrowsNav: true,
                arrowsNavAutoHide: false,
                controlNavigation: 'bullets',
                sliderDrag: false,
                autoHeight: true,
                autoScaleSlider:false,
                imageScaleMode:'none',
                imageAlignCenter: 'none',
                numImagesToPreload: 6
            });

        });

        $(window).load(function() {
            var slider = $('.notesbarList').data('royalSlider');
            slider.updateSliderSize();
            console.log('Load Update Slides Run');
        });

    </script>
    <script type="text/javascript">
        var disqus_shortname = 'lgod'; // required: replace example with your forum shortname


        (function () {
            var s = document.createElement('script'); s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
    </script>
{% endblock %}
